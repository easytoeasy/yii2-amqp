<?php

namespace pzr\amqp;

use yii\base\BaseObject;

class Response extends BaseObject
{

    public $response;

    public static $error = [
        0 => 'SUCCESS',
        1 => 'object|action is empty：',
        2 => 'object instance error：',
        3 => 'action is\'t exist：',
        4 => 'object is\'t exist：',
        5 => '抛出异常：',
        10 => 'other uncatch error',
    ];


    public static function setError($errno, $msg = '')
    {
        $msg = self::$error[$errno] . $msg;
        return [
            'rpc_errno' => $errno,
            'rpc_msg' => $msg
        ];
    }

    public static function checkResponse($result)
    {
        if (!is_array($result)) {
            return $result;
        }
        if (isset($result['rpc_errno']) && $result['rpc_errno'] != 0) {
            return false;
        }
        return $result;
    }

    /**
     * Get the value of response
     */
    public function getResponse()
    {
        return $this->response;
    }

    /**
     * Set the value of response
     *
     * @return  self
     */
    public function setResponse($response)
    {
        $this->response = $response;

        return $this;
    }
}
